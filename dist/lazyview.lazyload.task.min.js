!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.LazyLoadTask=e():t.LazyLoadTask=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=6)}([function(t,e,n){"use strict";function r(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var o=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,a,u=r(t),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var c in n)s.call(n,c)&&(u[c]=n[c]);if(o){a=o(n);for(var f=0;f<a.length;f++)i.call(n,a[f])&&(u[a[f]]=n[a[f]])}}return u}},function(t,e,n){"use strict";function r(t,e){return t.classList?!!e&&t.classList.contains(e):(" "+t.className+" ").indexOf(" "+e+" ")!==-1}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r,t.exports=e.default},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=n(0),s=function(t){return t&&t.__esModule?t:{default:t}}(o),i=function(){function t(e,n){r(this,t),this.lazyView=e,this.name=name,this.props=(0,s.default)({},t.defaultProps,n),this.onEnter=this.onEnter.bind(this),this.onExit=this.onExit.bind(this),this.init()}return t.prototype.destroy=function(){this.lazyView.removeOffset(this.name),this.props=null,this.onEnter=null,this.onExit=null,this.lazyView=null},t.prototype.init=function(){this.lazyView.one("enter",this.onEnter),this.lazyView.one("exit",this.onExit)},t.prototype.onStop=function(t){return Promise.resolve(t)},t.prototype.onStart=function(t){return Promise.resolve(this.lazyView)},t.prototype.onComplete=function(t){return Promise.resolve(this.lazyView)},t.prototype.onAfterComplete=function(t){return this.lazyView.checkBounds(),Promise.resolve(this.lazyView)},t.prototype.onEnter=function(){var t=this;return this.onStart(this.lazyView).then(function(e){if(t.props&&t.props.onStart){var n=t.props.onStart.call(t,t.lazyView);if(n.then)return n}return e}).then(function(e){return t.onComplete(e)}).then(function(e){return t.onAfterComplete(e)}).then(function(e){if(t.props&&t.props.onComplete){var n=t.props.onComplete.call(t,t.lazyView);if(n.then)return n}return e})},t.prototype.onExit=function(){var t=this,e=this.lazyView;return this.onStop(e).then(function(n){if(t.props&&t.props.onStop){var r=t.props.onStop.call(t,e);if(r.then)return r}return n})},t}();i.defaultProps={name:"lazytask",once:!1,startClass:null,completeClass:null,onStart:null,onStop:null,onComplete:null,onEnter:null,onExit:null},e.default=i,t.exports=e.default},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function t(e,n){r(this,t),this.creator=function(t){return new e(t,n)}};e.default=o,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.hasClass=e.removeClass=e.addClass=void 0;var o=n(7),s=r(o),i=n(8),a=r(i),u=n(1),l=r(u);e.addClass=s.default,e.removeClass=a.default,e.hasClass=l.default,e.default={addClass:s.default,removeClass:a.default,hasClass:l.default}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t},o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.onLoad,o=(e.onProgress,e.onStart,e.onError,e.setSource),s=void 0===o?r:o;return new Promise(function(e,r){var o=t.getAttribute("data-src"),i=t.getAttribute("data-srcset");o||i||e(t);var a=function r(o){o.target.removeEventListener("load",r),o.target.removeEventListener("error",r),setTimeout(function(){n&&n(t),e(t)},0)};t.addEventListener("load",a),t.addEventListener("error",a),o&&t.getAttribute("src")!==o&&(t.src=s(o),t.removeAttribute("data-src")),i&&t.getAttribute("srcset")!==i&&(t.srcset=s(i),t.removeAttribute("data-srcset"))})},s=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.resize,r=void 0!==n&&n,s=e.selector,i=void 0===s?"[data-src], [data-srcset]":s,a=e.onLoad,u=e.onProgress,l=e.onStart,c=e.onError,f=e.setSource;if(!t)return Promise.reject(t);var p=Array.prototype.slice.call(t.querySelectorAll(i));if(!p.length)return Promise.resolve(t);var d=r?t.clientHeight:0;return Promise.all(p.map(function(t){return o(t,{onLoad:a,onProgress:u,onStart:l,onError:c,setSource:f})})).then(function(){return d&&"undefined"!=typeof window&&window.dispatchEvent(new Event("resize")),p})};e.default=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=n(3),u=r(a),l=n(2),c=r(l),f=n(0),p=r(f),d=n(5),h=r(d),y=n(4),v=function(t){function e(n,r){o(this,e),r=(0,p.default)({},e.defaultProps,r);var i=s(this,t.call(this,n,r));return i.onLoad=i.onLoad.bind(i),i}return i(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.onLoad=null},e.prototype.onLoad=function(t){this.props.completeClass&&(0,y.addClass)(t,this.props.completeClass)},e.prototype.onStart=function(){return(0,h.default)(this.lazyView.node,{onLoad:this.onLoad})},e}(c.default);v.defaultProps={selector:"img",once:!0,name:"lazyload"},t.exports=function(t){return new u.default(v,t)}},function(t,e,n){"use strict";function r(t,e){t.classList?t.classList.add(e):(0,s.default)(t)||(t.className=t.className+" "+e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var o=n(1),s=function(t){return t&&t.__esModule?t:{default:t}}(o);t.exports=e.default},function(t,e,n){"use strict";t.exports=function(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}}])});