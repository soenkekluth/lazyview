!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.LazyLoadTask=e():t.LazyLoadTask=e()}(this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return t[o].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),l=function t(e,n,o){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,o)}if("value"in i)return i.value;var s=i.get;if(void 0!==s)return s.call(o)},u=n(3),c=o(u),f=n(2),p=o(f),h=function(t){function e(t,n,o){return i(this,e),n=n||{},n.destroyOnComplete=!0,r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,"lazyload"))}return s(e,t),a(e,[{key:"init",value:function(){var t=this.lazyView.el,n=t.getAttribute("data-src"),o=t.getAttribute("data-srcset");n||o?(l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"init",this).call(this),this.dispatchLoad=this.dispatchLoad.bind(this)):this.destroy()}},{key:"destroy",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this),this.dispatchLoad=null}},{key:"dispatchLoad",value:function(t){var e=this,n=this.lazyView.el;setTimeout(function(){},100),this.options.loadClass&&n.classList.remove(this.options.loadClass),this.options.completeClass&&n.classList.add(this.options.completeClass),n.removeEventListener("load",this.dispatchLoad),this.options.onComplete&&this.options.onComplete.call(this,this.lazyView),setTimeout(function(){e.lazyView.update(),e.options.destroyOnComplete&&e.destroy()},10)}},{key:"onEnter",value:function(){var t=this.lazyView.el,e=t.getAttribute("data-src"),n=t.getAttribute("data-srcset"),o=!1;e&&t.getAttribute("src")!==e&&(o=!0,t.setAttribute("src",e)),n&&t.getAttribute("srcset")!==n&&(o=!0,t.setAttribute("srcset",n)),o&&(t.addEventListener("load",this.dispatchLoad),this.options.loadClass&&t.classList.add(this.options.loadClass),t.removeAttribute("data-src"),t.removeAttribute("data-srcset")),this.lazyView.removeOffset(this.name),this.options.onStart&&this.options.onStart.call(this,this.lazyView)}}]),e}(p.default);t.exports=function(t){return new c.default(h,t)}},function(t,e){"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function o(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var o=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if("0123456789"!==o.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}var i=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;t.exports=o()?Object.assign:function(t,e){for(var o,s,a=n(t),l=1;l<arguments.length;l++){o=Object(arguments[l]);for(var u in o)i.call(o,u)&&(a[u]=o[u]);if(Object.getOwnPropertySymbols){s=Object.getOwnPropertySymbols(o);for(var c=0;c<s.length;c++)r.call(o,s[c])&&(a[s[c]]=o[s[c]])}}return a}},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=n(1),a=o(s),l=function(){function t(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"lazytask";i(this,t),this.lazyView=e,this.name=o,this.options=(0,a.default)({},t.defaults,n),this.onEnter=this.onEnter.bind(this),this.onExit=this.onExit.bind(this),this.init()}return r(t,[{key:"destroy",value:function(){this.lazyView.removeOffset(this.name),this.options=null,this.onEnter=null,this.onExit=null,this.lazyView=null}},{key:"init",value:function(){this.options.threshold?(this.lazyView.addOffset(this.name,this.options.threshold),this.lazyView.once("enter:"+this.name,this.onEnter),this.lazyView.once("exit:"+this.name,this.onExit)):(this.lazyView.once("enter",this.onEnter),this.lazyView.once("exit",this.onExit))}},{key:"onStart",value:function(t){return Promise.resolve(t)}},{key:"onComplete",value:function(t){return Promise.resolve(t)}},{key:"onEnter",value:function(){var t=this,e=this.options.onStart||this.onStart,n=this.options.onComplete||this.onComplete,o=e.call(this,this.lazyView);return o.then?o.then(function(e){return n.call(t,e||t.lazyView)}):n(o)}},{key:"onExit",value:function(){}}]),t}();l.defaults={destroyOnComplete:!1,completeClass:null,initClass:null,onStart:null,onComplete:null,onEnter:null,onExit:null},e.default=l,t.exports=e.default},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),s=(o(r),function t(e,n){i(this,t),this.creator=function(t){return new e(t,n)}});e.default=s,t.exports=e.default}])});