!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.LazyView=t()}}(function(){var t;return function t(e,n,i){function o(r,l){if(!n[r]){if(!e[r]){var a="function"==typeof require&&require;if(!l&&a)return a(r,!0);if(s)return s(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var h=n[r]={exports:{}};e[r][0].call(h.exports,function(t){var n=e[r][1][t];return o(n?n:t)},h,h.exports,t,e,n,i)}return n[r].exports}for(var s="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}({1:[function(e,n,i){!function(e,i){"undefined"!=typeof n?n.exports=i():"function"==typeof t&&"object"==typeof t.amd?t(i):this[e]=i()}("domready",function(){var t,e=[],n=document,i=n.documentElement.doScroll,o="DOMContentLoaded",s=(i?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return s||n.addEventListener(o,t=function(){for(n.removeEventListener(o,t),s=1;t=e.shift();)t()}),function(t){s?setTimeout(t,0):e.push(t)}})},{}],2:[function(e,n,i){(function(o){!function(e){if("object"==typeof i&&"undefined"!=typeof n)n.exports=e();else if("function"==typeof t&&t.amd)t([],e);else{var s;s="undefined"!=typeof window?window:"undefined"!=typeof o?o:"undefined"!=typeof self?self:this,s.FastScroll=e()}}(function(){var t;return function t(n,i,o){function s(l,a){if(!i[l]){if(!n[l]){var c="function"==typeof e&&e;if(!a&&c)return c(l,!0);if(r)return r(l,!0);var h=new Error("Cannot find module '"+l+"'");throw h.code="MODULE_NOT_FOUND",h}var u=i[l]={exports:{}};n[l][0].call(u.exports,function(t){var e=n[l][1][t];return s(e?e:t)},u,u.exports,t,n,i,o)}return i[l].exports}for(var r="function"==typeof e&&e,l=0;l<o.length;l++)s(o[l]);return s}({1:[function(e,n,i){!function(e){"use strict";var i=function(t,e){var n=[].slice.call(arguments,2),i=function(){return e.apply(t,n)};return i};"undefined"!=typeof n&&n.exports?n.exports=i:"undefined"!=typeof t?t(function(){return i}):e.delegate=i}(this)},{}],2:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=t("delegatejs"),l=i(r),a=new Map,c=function(){window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame},h=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?window:arguments[0],n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return o(this,t),t.hasScrollTarget(e)?t.getInstance(e):(this.scrollTarget=e,this.options=n,a.set(this.scrollTarget,this),this.options.hasOwnProperty("animationFrame")||(this.options.animationFrame=!0),c(),this.destroyed=!1,this.scrollY=0,this.scrollX=0,this.lastScrollY=0,this.lastScrollX=0,this.timeout=0,this.speedY=0,this.speedX=0,this.stopFrames=5,this.currentStopFrames=0,this.firstRender=!0,this.animationFrame=!0,this.scrolling=!1,void this.init())}return t.prototype.init=function(){this.updateScrollPosition=this.scrollTarget===window?(0,l.default)(this,this.updateWindowScrollPosition):(0,l.default)(this,this.updateElementScrollPosition),this.updateScrollPosition(),this.trigger=this.dispatchEvent,this.attr=this.getAttributes,this.onScroll=(0,l.default)(this,this.onScroll),this.onNextFrame=(0,l.default)(this,this.onNextFrame),this.scrollTarget.addEventListener?this.scrollTarget.addEventListener("scroll",this.onScroll,!!u.passiveEvents&&{passive:!0}):this.scrollTarget.attachEvent&&this.scrollTarget.attachEvent("scroll",this.onScroll)},t.prototype.destroy=function(){this.destroyed||(this.cancelNextFrame(),this.scrollTarget.addEventListener?(this.scrollTarget.removeEventListener("mousewheel",this.onScroll),this.scrollTarget.removeEventListener("scroll",this.onScroll)):this.scrollTarget.attachEvent&&(this.scrollTarget.detachEvent("onmousewheel",this.onScroll),this.scrollTarget.detachEvent("scroll",this.onScroll)),this.onScroll=null,this.updateScrollPosition=null,this.onNextFrame=null,this.scrollTarget=null,this.destroyed=!0)},t.prototype.getAttributes=function(){return{scrollY:this.scrollY,scrollX:this.scrollX,speedY:this.speedY,speedX:this.speedX,angle:0,directionY:0===this.speedY?t.NONE:this.speedY>0?t.UP:t.DOWN,directionX:0===this.speedX?t.NONE:this.speedX>0?t.RIGHT:t.LEFT}},t.prototype.updateWindowScrollPosition=function(){this.scrollY=window.scrollY||window.pageYOffset||0,this.scrollX=window.scrollX||window.pageXOffset||0},t.prototype.updateElementScrollPosition=function(){this.scrollY=this.scrollTarget.scrollTop,this.scrollX=this.scrollTarget.scrollLeft},t.prototype.onScroll=function(){if(this.currentStopFrames=0,this.firstRender&&(this.firstRender=!1,this.scrollY>1))return this.updateScrollPosition(),void this.dispatchEvent(t.EVENT_SCROLL_PROGRESS);if(!this.scrolling)if(this.scrolling=!0,this.dispatchEvent(t.EVENT_SCROLL_START),this.options.animationFrame)this.nextFrameID=window.requestAnimationFrame(this.onNextFrame);else{clearTimeout(this.timeout),this.onNextFrame();var e=this;this.timeout=setTimeout(function(){e.onScrollStop()},100)}},t.prototype.onNextFrame=function(){return this.updateScrollPosition(),this.speedY=this.lastScrollY-this.scrollY,this.speedX=this.lastScrollX-this.scrollX,this.lastScrollY=this.scrollY,this.lastScrollX=this.scrollX,this.options.animationFrame&&this.scrolling&&0===this.speedY&&this.currentStopFrames++>this.stopFrames?void this.onScrollStop():(this.dispatchEvent(t.EVENT_SCROLL_PROGRESS),void(this.options.animationFrame&&(this.nextFrameID=requestAnimationFrame(this.onNextFrame))))},t.prototype.onScrollStop=function(){this.scrolling=!1,this.options.animationFrame&&(this.cancelNextFrame(),this.currentStopFrames=0),this.dispatchEvent(t.EVENT_SCROLL_STOP)},t.prototype.cancelNextFrame=function(){window.cancelAnimationFrame(this.nextFrameID)},t.prototype.dispatchEvent=function(t){this.scrollTarget.dispatchEvent(t)},t.prototype.on=function(t,e){return this.scrollTarget.addEventListener(t,e)},t.prototype.off=function(t,e){return this.scrollTarget.removeEventListener(t,e)},t}();h.getInstance=function(t,e){return a.has(t)||a.set(t,new h(t,e)),a.get(t)},h.hasInstance=function(t){return a.has(t)},h.hasScrollTarget=h.hasInstance,h.clearInstance=function(){var t=arguments.length<=0||void 0===arguments[0]?window:arguments[0];h.hasInstance(t)&&(h.getInstance(t).destroy(),a.delete(t))},h.UP="up",h.DOWN="down",h.NONE="none",h.LEFT="left",h.RIGHT="right",h.EVENT_SCROLL_PROGRESS=new Event("scroll:progress"),h.EVENT_SCROLL_START=new Event("scroll:start"),h.EVENT_SCROLL_STOP=new Event("scroll:stop"),n.default=h;var u=function(){function t(){o(this,t),this._passiveEvents=null}return s(t,[{key:"animationFrame",get:function(){return!0}},{key:"passiveEvents",get:function(){var t=this;if(!this._passiveEvents)return this._passiveEvents;this._supportsPassive=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t._supportsPassive=!0}});window.addEventListener("test",null,e)}catch(t){}}}]),t}();e.exports=n.default},{delegatejs:1}]},{},[2])(2)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,e,n){"use strict";function i(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function o(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var i=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if("0123456789"!==i.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(t){o[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(t){return!1}}var s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=o()?Object.assign:function(t,e){for(var n,o,l=i(t),a=1;a<arguments.length;a++){n=Object(arguments[a]);for(var c in n)s.call(n,c)&&(l[c]=n[c]);if(Object.getOwnPropertySymbols){o=Object.getOwnPropertySymbols(n);for(var h=0;h<o.length;h++)r.call(n,o[h])&&(l[o[h]]=n[o[h]])}}return l}},{}],4:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=t("fastscroll"),r=i(s),l=t("domready"),a=i(l),c=t("object-assign"),h=i(c),u=function(){return window.scrollY||window.pageYOffset||0},d=function(){return Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)},f=function(t,e){var n=t.getBoundingClientRect(),i=n.top+u(),o=e||n.height;return{top:i,bottom:i+o,height:o,width:n.width}},p={className:"lazyview-active",addClass:!1,threshold:0,callback:null},m=function(){function t(e,n){var i=this;o(this,t),this.options=(0,h.default)({},p,n),this.el=e,this.state={inView:!1},(0,a.default)(function(){i.init()})}return t.prototype.init=function(){this.scrollTarget="auto"!==window.getComputedStyle(this.el.parentNode).overflow?window:this.el.parentNode,this.fastScroll=new r.default(this.scrollTarget),this.cachePosition(),this.onScroll=this.onScroll.bind(this),this.fastScroll.on("scroll:start",this.onScroll),this.fastScroll.on("scroll:progress",this.onScroll),this.fastScroll.on("scroll:stop",this.onScroll),this.onResize=this.onResize.bind(this),window.addEventListener("resize",this.onResize,!1),window.addEventListener("orientationchange",this.onResize,!1)},t.prototype.render=function(){this.options.addClass&&(this.state.inView?this.el.classList.add(this.options.className):this.el.classList.remove(this.options.className))},t.prototype.checkInView=function(){var e=this.fastScroll.attr().scrollY;e>=this.position.top-this.windowHeight+this.options.threshold&&e<=this.position.bottom-this.options.threshold?this.state.inView||(this.setState({inView:!0}),this.dispatch(t.IN)):this.state.inView&&(this.setState({inView:!1}),this.dispatch(t.OUT))},t.prototype.cachePosition=function(){this.windowHeight=window.innerHeight,this.documentHeight=d(),this.position=f(this.el)},t.prototype.setState=function(t,e){this.state=t,e!==!0&&this.render()},t.prototype.onScroll=function(){this.checkInView()},t.prototype.onResize=function(){this.cachePosition(),this.checkInView()},t.prototype.dispatch=function(t){return this.el.dispatchEvent(new Event(t))},t.prototype.on=function(t,e){return this.el.addEventListener(t,e,!1)},t.prototype.off=function(t,e){return this.el.removeEventListener(t,e)},t}();m.IN="lazyview:in",m.OUT="lazyview:out",m.apply=function(t,e){if(t){if(t.length){for(var n=[],i=0;i<t.length;i++)n.push(new m(t[i],e));return n}return new m(t,e)}},n.default=m,e.exports=n.default},{domready:1,fastscroll:2,"object-assign":3}]},{},[4])(4)});
